window.docContents[138].resolve({"/Session-14___-Maps-preserve-positive-properties/#A-Lean-Companion-to-Conceptual-Mathematics--Session-14___-Maps-preserve-positive-properties":{"contents":"\n\n\n\nFor the exercises in this Session, we use the category Type instead of the category ð‘º of sets, and we are told to assume that {f \\circ \\alpha = \\beta \\circ f}. (We use End X and End Y here instead of X âŸ¶ X and  Y âŸ¶ Y to facilitate the use of exponents in Exercises 2 and 5.)\n\n\n\nvariable (X Y : Type) (Î± : End X) (Î² : End Y)\n         (f : X âŸ¶ Y) (hf_comm : f âŠš Î± = Î² âŠš f)\n\n\nLet x_1 and x_2 be two points of X and define {y_1 = f(x_1)} and {y_2 = f(x_2)}. If\n\\alpha(x_1) = \\alpha(x_2) \\text{ in } X\n(i.e. pushing the button \\alpha we arrive at the same state whether the initial state was x_1 or x_2) then show that\n\\beta(y_1) = \\beta(y_2) \\text{ in } Y\n(the 'same' statement with button \\beta on the machine Y^{â†»\\beta} with regard to its two states y_1 and y_2).\n\nThe solution below faithfully follows the one provided in the book on p. 171.example (xâ‚ xâ‚‚ : X) (yâ‚ yâ‚‚ : Y)\n    (hyâ‚ : yâ‚ = f xâ‚) (hyâ‚‚ : yâ‚‚ = f xâ‚‚) (hÎ± : Î± xâ‚ = Î± xâ‚‚)\n    : Î² yâ‚ = Î² yâ‚‚ := by\n  have hÎ²yâ‚ : Î² yâ‚ = f (Î± xâ‚) := by\n    calc Î² yâ‚\n      _ = Î² (f xâ‚) := by rw [hyâ‚]\n      _ = (Î² âŠš f) xâ‚ := rfl\n      _ = (f âŠš Î±) xâ‚ := by rw [hf_comm]\n      _ = f (Î± xâ‚) := rfl\n  have hÎ²yâ‚‚ : Î² yâ‚‚ = f (Î± xâ‚‚) := by\n    calc Î² yâ‚‚\n      _ = Î² (f xâ‚‚) := by rw [hyâ‚‚]\n      _ = (Î² âŠš f) xâ‚‚ := rfl\n      _ = (f âŠš Î±) xâ‚‚:= by rw [hf_comm]\n      _ = f (Î± xâ‚‚) := rfl\n  have hfÎ± : f (Î± xâ‚) = f (Î± xâ‚‚) := by rw [hÎ±]\n  rw [hÎ²yâ‚, hÎ²yâ‚‚, hfÎ±]\nAn alternative and more efficient implementation could be as follows:example (xâ‚ xâ‚‚ : X) (yâ‚ yâ‚‚ : Y)\n    (hyâ‚ : yâ‚ = f xâ‚) (hyâ‚‚ : yâ‚‚ = f xâ‚‚) (hÎ± : Î± xâ‚ = Î± xâ‚‚)\n    : Î² yâ‚ = Î² yâ‚‚ := by\n  rw [hyâ‚, hyâ‚‚]\n  change (Î² âŠš f) xâ‚ = (Î² âŠš f) xâ‚‚\n  rw [â† hf_comm]\n  change f (Î± xâ‚) = f (Î± xâ‚‚)\n  rw [hÎ±]\n\n\nIf instead we know that\nx_2 = \\alpha^5(x_1) \\text{ in } X\n(i.e. that starting from state x_1, five pushes of the button \\alpha will bring X to the state x_2), show that the 'same' statement is true of the states y_1 and y_2 in Y^{â†»\\beta}; i.e.\ny_2 = \\beta^5(y_1) \\text{ in } Y\n\nThe solution below faithfully follows the one provided in the book on p. 172.example (xâ‚ xâ‚‚ : X) (yâ‚ yâ‚‚ : Y)\n    (hyâ‚ : yâ‚ = f xâ‚) (hyâ‚‚ : yâ‚‚ = f xâ‚‚) (h : xâ‚‚ = (Î± ^ 5) xâ‚)\n    : yâ‚‚ = (Î² ^ 5) yâ‚ := by\n  have hf_pow_comm : f âŠš (Î± ^ 5) = (Î² ^ 5) âŠš f := by\n    calc f âŠš (Î± ^ 5)\n      _ = f âŠš (Î± âŠš Î± ^ 4) := rfl\n      _ = (f âŠš Î±) âŠš (Î± ^ 4) := rfl\n      _ = (Î² âŠš f) âŠš (Î± ^ 4) := by rw [hf_comm]\n      _ = Î² âŠš (f âŠš (Î± ^ 4)) := rfl\n      _ = Î² âŠš ((f âŠš Î±) âŠš (Î± ^ 3)) := rfl\n      _ = Î² âŠš ((Î² âŠš f) âŠš (Î± ^ 3)) := by rw [hf_comm]\n      _ = (Î² âŠš (Î² âŠš f)) âŠš (Î± ^ 3) := rfl\n      _ = ((Î² ^ 2) âŠš f) âŠš (Î± ^ 3) := rfl\n      _ = (Î² ^ 2) âŠš (f âŠš (Î± ^ 3)) := rfl\n      _ = (Î² ^ 2) âŠš ((f âŠš Î±) âŠš (Î± ^ 2)) := rfl\n      _ = (Î² ^ 2) âŠš ((Î² âŠš f) âŠš (Î± ^ 2)) := by rw [hf_comm]\n      _ = ((Î² ^ 2) âŠš (Î² âŠš f)) âŠš (Î± ^ 2) := rfl\n      _ = ((Î² ^ 3) âŠš f) âŠš (Î± ^ 2) := rfl\n      _ = (Î² ^ 3) âŠš (f âŠš (Î± ^ 2)) := rfl\n      _ = (Î² ^ 3) âŠš ((f âŠš Î±) âŠš Î±) := rfl\n      _ = (Î² ^ 3) âŠš ((Î² âŠš f) âŠš Î±) := by rw [hf_comm]\n      _ = ((Î² ^ 3) âŠš (Î² âŠš f)) âŠš Î± := rfl\n      _ = ((Î² ^ 4) âŠš f) âŠš Î± := rfl\n      _ = (Î² ^ 4) âŠš (f âŠš Î±) := rfl\n      _ = (Î² ^ 4) âŠš (Î² âŠš f) := by rw [hf_comm]\n      _ = (Î² ^ 5) âŠš f := rfl\n  apply Eq.symm\n  calc (Î² ^ 5) yâ‚\n    _ = (Î² ^ 5) (f xâ‚) := by rw [hyâ‚]\n    _ = ((Î² ^ 5) âŠš f) xâ‚ := rfl\n    _ = (f âŠš (Î± ^ 5)) xâ‚ := by rw [hf_pow_comm]\n    _ = f ((Î± ^ 5) xâ‚) := rfl\n    _ = f xâ‚‚ := by rw [h]\n    _ = yâ‚‚ := by rw [hyâ‚‚]\nWe can improve upon this solution from the book by first proving a lemma pow_comm (which we'll also need later in Exercise 5).open Function\nlemma _root_.pow_comm {X Y : Type} (f : X âŸ¶ Y)\n    (Î± : End X) (Î² : End Y)\n    (hf_comm : f âŠš Î± = Î² âŠš f) (n : â„•)\n    : f âŠš (Î±^[n]) = (Î²^[n]) âŠš f :=\n  have hf_semiconj : Semiconj f Î± Î² :=\n    semiconj_iff_comp_eq.mpr hf_comm\n  have hf_pow_semiconj : Semiconj f (Î±^[n]) (Î²^[n]) :=\n    Semiconj.iterate_right hf_semiconj n\n  semiconj_iff_comp_eq.mp hf_pow_semiconj\nAn alternative and more efficient implementation now follows:example (xâ‚ xâ‚‚ : X) (yâ‚ yâ‚‚ : Y)\n    (hyâ‚ : yâ‚ = f xâ‚) (hyâ‚‚ : yâ‚‚ = f xâ‚‚) (h : xâ‚‚ = (Î± ^ 5) xâ‚)\n    : yâ‚‚ = (Î² ^ 5) yâ‚ := by\n  have hf_pow_comm : f âŠš (Î± ^ 5) = (Î² ^ 5) âŠš f :=\n    pow_comm f Î± Î² hf_comm 5\n  rw [hyâ‚, hyâ‚‚, h]\n  change (f âŠš (Î± ^ 5)) xâ‚ = ((Î² ^ 5) âŠš f) xâ‚\n  rw [hf_pow_comm]\n\n\nIf {\\alpha(x) = x} (i.e. x is an 'equilibrium state' or 'fixed point' of \\alpha), then the 'same' is true of {y = f(x)} in Y^{â†»\\beta}.\n\nThe solution below faithfully follows the one provided in the book on pp. 172â€“173.example (x : X) (y : Y) (hy : y = f x) (h : Î± x = x) : Î² y = y := by\n  calc Î² y\n    _ = Î² (f x) := by rw [hy]\n    _ = (Î² âŠš f) x := rfl\n    _ = (f âŠš Î±) x := by rw [hf_comm]\n    _ = f (Î± x) := rfl\n    _ = f x := by rw [h]\n    _ = y := by rw [hy]\n\n\n\n\nGive an example in which x is not a fixed point of \\alpha but {y = f(x)} is a fixed point of \\beta. This illustrates that although certain important properties are 'preserved' by f they are not necessarily 'reflected'. Hint: The simplest conceivable example of Y^{â†»\\beta} will do.\n\nThe solution below faithfully follows the one provided in the book on p. 174.inductive X\n  | xâ‚ | xâ‚‚\n  deriving DecidableEq\n\ninductive Y\n  | yâ‚\n\ndef Î± : X âŸ¶ X\n  | X.xâ‚ => X.xâ‚‚\n  | X.xâ‚‚ => X.xâ‚‚\n\ndef Î² : Y âŸ¶ Y\n  | Y.yâ‚ => Y.yâ‚\n\nvariable (f : X âŸ¶ Y) (hf_comm : f âŠš Î± = Î² âŠš f)\nIn our example, X.xâ‚ is not a fixed point of \\alpha, but its image f X.xâ‚ is a fixed point of \\beta.example : Â¬(Î± X.xâ‚ = X.xâ‚) âˆ§ Î² (f X.xâ‚) = f X.xâ‚ := by\n  constructor\n  Â· decide\n  Â· dsimp [Î²]\n\n\nShow that if {\\alpha^4(x) = x}, then the 'same' is true of {y = f(x)}. (Same idea as Exercise 2.) But give an example where {\\alpha^4(x) = x} and {\\alpha^2(x) \\ne x}, while {\\beta^2(y) = y} and {\\beta(y) \\ne y}. This illustrates that while f preserves the property of being in a small cycle, the size of the cycle may decrease.\n\nFor the first part of the exercise, we show that {\\alpha^4(x) = x} implies {\\beta^4(f(x)) = f(x)}. To do so, we make use of the lemma pow_comm that we defined earlier in Exercise 2.example (X Y : Type) (Î± : End X) (Î² : End Y)\n    (f : X âŸ¶ Y) (hf_comm : f âŠš Î± = Î² âŠš f)\n    (x : X) (y : Y)\n    (hy : y = f x) (h : (Î± ^ 4) x = x)\n    : (Î² ^ 4) y = y := by\n  have hf_pow_comm : f âŠš (Î± ^ 4) = (Î² ^ 4) âŠš f :=\n    pow_comm f Î± Î² hf_comm 4\n  rw [hy]\n  nth_rw 2 [â† h]\n  apply Eq.symm\n  change (f âŠš (Î± ^ 4)) x = ((Î² ^ 4) âŠš f) x\n  rw [hf_pow_comm]\nFor the second part of the exercise, we give the following example that meets the required conditions:inductive X\n  | xâ‚ | xâ‚‚ | xâ‚ƒ | xâ‚„\n\ninductive Y\n  | yâ‚ | yâ‚‚\n\ndef Î± : End X\n  | X.xâ‚ => X.xâ‚‚\n  | X.xâ‚‚ => X.xâ‚ƒ\n  | X.xâ‚ƒ => X.xâ‚„\n  | X.xâ‚„ => X.xâ‚\n\ndef Î² : End Y\n  | Y.yâ‚ => Y.yâ‚‚\n  | Y.yâ‚‚ => Y.yâ‚\n\ndef f : X âŸ¶ Y\n  | X.xâ‚ => Y.yâ‚\n  | X.xâ‚‚ => Y.yâ‚‚\n  | X.xâ‚ƒ => Y.yâ‚\n  | X.xâ‚„ => Y.yâ‚‚\n\nexample (x : X) (y : Y) (hy : y = f x)\n    : (Î± ^ 4) x = x âˆ§ Â¬((Î± ^ 2) x = x)\n      âˆ§\n      (Î² ^ 2) y = y âˆ§ Â¬(Î² y = y) := by\n  and_intros\n  Â· cases x <;> rfl\n  Â· by_contra h\n    change (Î± âŠš Î±) x = x at h\n    cases x\n    all_goals\n      dsimp [Î±] at h\n      contradiction\n  Â· cases y <;> rfl\n  Â· by_contra h\n    cases y\n    all_goals\n      dsimp [Î²] at h\n      contradiction\n\n\n\n\n","context":"A Lean Companion to Conceptual Mathematics","header":"Session 14: Maps preserve positive properties","id":"/Session-14___-Maps-preserve-positive-properties/#A-Lean-Companion-to-Conceptual-Mathematics--Session-14___-Maps-preserve-positive-properties"}});