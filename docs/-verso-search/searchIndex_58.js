window.docContents[58].resolve({"/Article-III___-Examples-of-categories/#A-Lean-Companion-to-Conceptual-Mathematics--Article-III___-Examples-of-categories--4___-Categories-of-endomaps":{"contents":"The category ùë™‚Üª of endomaps is described on pp. 138‚Äì139. We implement the category ùë™‚Üª below (cf. the category ùë∫‚Üª).\n\n\n\nDefine the objects.\n\nstructure Endomap where\n  carrier : Type\n  toEnd : carrier ‚ü∂ carrier\n\n\nDefine the maps.\n\ndef EndomapHom (X Y : Endomap) := {\n  f : X.carrier ‚ü∂ Y.carrier //\n      f ‚äö X.toEnd = Y.toEnd ‚äö f -- commutes\n}\n\n\nDefine the identity maps and the composite maps.\n\nnamespace EndomapHom\n\ndef id (X : Endomap) : EndomapHom X X := ‚ü®\n  ùüô X.carrier,\n  rfl\n‚ü©\n\ndef comp {X Y Z : Endomap}\n    (f : EndomapHom X Y) (g : EndomapHom Y Z)\n    : EndomapHom X Z := ‚ü®\n  g.val ‚äö f.val,\n  by\n    obtain hf_comm := f.property\n    obtain hg_comm := g.property\n    rw [‚Üê Category.assoc, hf_comm, Category.assoc, hg_comm,\n        ‚Üê Category.assoc]\n‚ü©\n\nend EndomapHom\n\n\nInstantiate the category ùë™‚Üª.\n\ninstance instCatEndomap : Category Endomap where\n  Hom := EndomapHom\n  id := EndomapHom.id\n  comp := EndomapHom.comp\n\n\nMake the category ùë™‚Üª a concrete category.\n\ninstance {X Y : Endomap}\n    : FunLike (instCatEndomap.Hom X Y) X.carrier Y.carrier where\n  coe f := f.val\n  coe_injective' := fun _ _ h ‚Ü¶ Subtype.eq h\n\ninstance : ConcreteCategory Endomap instCatEndomap.Hom where\n  hom f := f\n  ofHom f := f\n\n\nstructure IdemEndomap extends Endomap where\n  idem : toEnd ‚äö toEnd = toEnd\n\ninstance instCatIdemEndomap : Category IdemEndomap where\n  Hom X Y := EndomapHom X.toEndomap Y.toEndomap\n  id X := EndomapHom.id X.toEndomap\n  comp := EndomapHom.comp\n\ninstance {X Y : IdemEndomap}\n    : FunLike (instCatIdemEndomap.Hom X Y) X.carrier Y.carrier where\n  coe f := f.val\n  coe_injective' := fun _ _ h ‚Ü¶ Subtype.eq h\n\ninstance : ConcreteCategory IdemEndomap instCatIdemEndomap.Hom where\n  hom f := f\n  ofHom f := f\n\n\nstructure InvEndomap extends Endomap where\n  inv : ‚àÉ inv, inv ‚äö toEnd = ùüô carrier ‚àß toEnd ‚äö inv = ùüô carrier\n\ninstance instCatInvEndomap : Category InvEndomap where\n  Hom X Y := EndomapHom X.toEndomap Y.toEndomap\n  id X := EndomapHom.id X.toEndomap\n  comp := EndomapHom.comp\n\ninstance {X Y : InvEndomap}\n    : FunLike (instCatInvEndomap.Hom X Y) X.carrier Y.carrier where\n  coe f := f.val\n  coe_injective' := fun _ _ h ‚Ü¶ Subtype.eq h\n\ninstance : ConcreteCategory InvEndomap instCatInvEndomap.Hom where\n  hom f := f\n  ofHom f := f\n\n\nstructure InvolEndomap extends InvEndomap where\n  invol : toEnd ‚äö toEnd = ùüô carrier\n\ninstance instCatInvolEndomap : Category InvolEndomap where\n  Hom X Y := EndomapHom X.toEndomap Y.toEndomap\n  id X := EndomapHom.id X.toEndomap\n  comp := EndomapHom.comp\n\ninstance {X Y : InvolEndomap}\n    : FunLike (instCatInvolEndomap.Hom X Y) X.carrier Y.carrier where\n  coe f := f.val\n  coe_injective' := fun _ _ h ‚Ü¶ Subtype.eq h\n\ninstance : ConcreteCategory InvolEndomap instCatInvolEndomap.Hom where\n  hom f := f\n  ofHom f := f\n\n\nWhat can you prove about an idempotent which has a retraction?\n\nWe can prove that the only idempotent which has a retraction is the identity.example {ùíû : Type u} [Category.{v, u} ùíû] {A : ùíû} {Œ± Œ≤ : A ‚ü∂ A}\n    (h_idem : Œ± ‚äö Œ± = Œ±) (h_retraction : Œ≤ ‚äö Œ± = ùüô A)\n    : Œ± = ùüô A := by\n  calc\n    Œ± = ùüô A ‚äö Œ± := by rw [Category.comp_id]\n    _ = (Œ≤ ‚äö Œ±) ‚äö Œ± := by rw [h_retraction]\n    _ = Œ≤ ‚äö Œ± ‚äö Œ± := by rw [Category.assoc]\n    _ = Œ≤ ‚äö Œ± := by rw [h_idem]\n    _ = ùüô A := by rw [h_retraction]\n\n\nA finite set A has an even number of elements iff (i.e. if and only if) there is an involution on A with no fixed points; A has an odd number of elements iff there is an involution on A with just one fixed point. Here we rely on known ideas about numbers ‚Äî but these properties can be used as a definition of oddness or evenness that can be verified without counting if the structure of a real situation suggests an involution. The map 'mate of' in a group A of socks is an obvious example.\n\nTODO Exercise III.3\n\nIn Exercises 4‚Äì7 that follow, we use the type \\mathbb{Z} instead of the set \\mathbb{Z} (and hence the concrete category Type instead of the category ùë∫ of sets).\n\nIf {\\alpha(x) = -x} is considered as an endomap of \\mathbb{Z}, is \\alpha an involution or an idempotent? What are its fixed points?\n\nDefine the endomap {\\alpha(x) = -x} on \\mathbb{Z}.def Œ± : ‚Ñ§ ‚ü∂ ‚Ñ§ := fun x ‚Ü¶ -x\n\\alpha is not an idempotent.example : ¬¨(IsIdempotent Œ±) := by\n  by_contra h\n  have h_contra : (Œ± ‚äö Œ±) 1 = Œ± 1 := congrFun h.idem 1\n  dsimp [Œ±] at h_contra\n  contradiction\n\\alpha is an involution.example : IsInvolution Œ± := {\n  invol := by\n    funext\n    dsimp [CategoryStruct.comp, Œ±]\n    ring\n}\nThe only fixed point of \\alpha is 0.example {x : ‚Ñ§} : Function.IsFixedPt Œ± x ‚Üî x = 0 := by\n  dsimp [Function.IsFixedPt, Œ±]\n  constructor\n  ¬∑ exact eq_zero_of_neg_eq\n  ¬∑ intro hx\n    rw [hx]\n    exact neg_zero\nNote that since the converse of eq_zero_of_neg_eq is true, we can also state the following:theorem _root_.eq_zero_iff_neg_eq {Œ± : Type u}\n    [AddCommGroup Œ±] [LinearOrder Œ±] [IsOrderedAddMonoid Œ±]\n    {a : Œ±} : -a = a ‚Üî a = 0 := by\n  constructor\n  ¬∑ exact eq_zero_of_neg_eq\n  ¬∑ intro h\n    rw [h]\n    exact neg_zero\nWe can then use this new lemma to simplify the proof in the previous example.example {x : ‚Ñ§} : Function.IsFixedPt Œ± x ‚Üî x = 0 := eq_zero_iff_neg_eq\n\n\nSame questions as above, if instead {\\alpha(x) = |x|}, the absolute value.\n\nDefine the endomap {\\alpha(x) = |x|} on \\mathbb{Z}.def Œ± : ‚Ñ§ ‚ü∂ ‚Ñ§ := fun x ‚Ü¶ |x|\n\\alpha is an idempotent.example : IsIdempotent Œ± := {\n  idem := by\n    funext\n    dsimp [CategoryStruct.comp, Œ±]\n    rw [abs_abs]\n}\n\\alpha is not an involution.example : ¬¨(IsInvolution Œ±) := by\n  by_contra h\n  have h_contra : (Œ± ‚äö Œ±) (-1) = (ùüô ‚Ñ§) (-1) := congrFun h.invol (-1)\n  dsimp [Œ±] at h_contra\n  contradiction\nThe fixed points of \\alpha are all the points greater than or equal to 0.example {x : ‚Ñ§} : Function.IsFixedPt Œ± x ‚Üî 0 ‚â§ x := by\n  dsimp [Function.IsFixedPt, Œ±]\n  constructor\n  ¬∑ intro hx\n    rw [‚Üê hx]\n    exact abs_nonneg x\n  ¬∑ exact abs_of_nonneg\nNote that since the converse of abs_of_nonneg is true with the additional assumption [AddRightMono Œ±], we can state the following:theorem _root_.abs_iff_nonneg {Œ± : Type u_1}\n    [Lattice Œ±] [AddGroup Œ±]\n    {a : Œ±} [AddLeftMono Œ±] [AddRightMono Œ±] : 0 ‚â§ a ‚Üî |a| = a := by\n  constructor\n  ¬∑ exact abs_of_nonneg\n  ¬∑ intro h\n    rw [‚Üê h]\n    exact abs_nonneg a\nWe can then use this new lemma to simplify the proof in the previous example.example {x : ‚Ñ§} : Function.IsFixedPt Œ± x ‚Üî 0 ‚â§ x := abs_iff_nonneg.symm\n\n\nIf \\alpha is the endomap of \\mathbb{Z}, defined by the formula {\\alpha(x) = x + 3}, is \\alpha an automorphism? If so, write the formula for its inverse.\n\nDefine the endomap {\\alpha(x) = x + 3} on \\mathbb{Z}.def Œ± : ‚Ñ§ ‚ü∂ ‚Ñ§ := fun x ‚Ü¶ x + 3\n\\alpha is an automorphism, with inverse {\\alpha^{-1}(x) = x - 3}.example : IsIso Œ± := by\n  let Œ±inv : ‚Ñ§ ‚ü∂ ‚Ñ§ := fun x ‚Ü¶ x - 3\n  exact {\n    out := by\n      use Œ±inv\n      constructor\n      all_goals\n        funext\n        dsimp [CategoryStruct.comp, Œ±, Œ±inv]\n        ring\n  }\n\n\nSame questions for {\\alpha(x) = 5x}.\n\nDefine the endomap {\\alpha(x) = 5x} on \\mathbb{Z}.def Œ± : ‚Ñ§ ‚ü∂ ‚Ñ§ := fun x ‚Ü¶ 5 * x\n\\alpha is not an automorphism.example : ¬¨(IsIso Œ±) := by\n  by_contra h\n  obtain ‚ü®Œ±inv, _, h_right_inv‚ü© := h.out\n  have h_contra‚ÇÅ : (Œ± ‚äö Œ±inv) 1 = (ùüô ‚Ñ§) 1 := congrFun h_right_inv 1\n  have h_contra‚ÇÇ : (5 : ‚Ñ§) ‚à£ 1 := by\n    use Œ±inv 1\n    exact h_contra‚ÇÅ.symm\n  contradiction\n\n\nShow that both ùë™·µâ, ùë™·∂ø are subcategories of the category [whose objects are all the endomaps \\alpha in ùë™ which satisfy {\\alpha \\circ \\alpha \\circ \\alpha = \\alpha}], i.e. that either an idempotent or an involution will satisfy {\\alpha^3 = \\alpha}.\n\nWe show that the category ùë™·µâ of idempotents is a subcategory of the category given in the question.example {Œ± : IdemEndomap}\n    : Œ±.toEnd ‚äö Œ±.toEnd ‚äö Œ±.toEnd = Œ±.toEnd := by\n  repeat rw [Œ±.idem]\nOr, more generally, that an idempotent will satisfy {\\alpha^3 = \\alpha}.example {ùíû : Type u} [Category.{v, u} ùíû] {A : ùíû}\n    (Œ± : A ‚ü∂ A) [IsIdempotent Œ±] : Œ± ‚äö Œ± ‚äö Œ± = Œ± := by\n  repeat rw [IsIdempotent.idem]\nWe show that the category ùë™·∂ø of involutions is a subcategory of the category given in the question.example {Œ± : InvolEndomap}\n    : Œ±.toEnd ‚äö Œ±.toEnd ‚äö Œ±.toEnd = Œ±.toEnd := by\n  rw [Œ±.invol, Category.id_comp]\nOr, more generally, that an involution will satisfy {\\alpha^3 = \\alpha}.example {ùíû : Type u} [Category.{v, u} ùíû] {A : ùíû}\n    (Œ± : A ‚ü∂ A) [IsInvolution Œ±] : Œ± ‚äö Œ± ‚äö Œ± = Œ± := by\n  rw [IsInvolution.invol, Category.id_comp]\n\n\nIn [the category Type], consider the endomap \\alpha of a three-element [type A] defined by...inductive A\n  | a‚ÇÅ | a‚ÇÇ | a‚ÇÉ\n\ndef Œ± : A ‚ü∂ A\n  | A.a‚ÇÅ => A.a‚ÇÇ\n  | A.a‚ÇÇ => A.a‚ÇÉ\n  | A.a‚ÇÉ => A.a‚ÇÇ\nShow that it satisfies {\\alpha^3 = \\alpha}, but that it is not idempotent and that it is not an involution.\n\nWe show that \\alpha satisfies {\\alpha^3 = \\alpha}.example : Œ± ‚äö Œ± ‚äö Œ± = Œ± := by\n  funext x\n  dsimp [CategoryStruct.comp, Œ±]\n  cases x <;> rfl\nBut \\alpha is not idempotent.example : ¬¨(IsIdempotent Œ±) := by\n  by_contra h\n  have h_contra : (Œ± ‚äö Œ±) A.a‚ÇÅ = Œ± A.a‚ÇÅ := congrFun h.idem A.a‚ÇÅ\n  dsimp [Œ±] at h_contra\n  contradiction\nAnd \\alpha is not an involution.example : ¬¨(IsInvolution Œ±) := by\n  by_contra h\n  have h_contra : (Œ± ‚äö Œ±) A.a‚ÇÅ = (ùüô A) A.a‚ÇÅ := congrFun h.invol A.a‚ÇÅ\n  dsimp [Œ±] at h_contra\n  contradiction\n\n\n","context":"A Lean Companion to Conceptual Mathematics\u0009Article III: Examples of categories","header":"4. Categories of endomaps","id":"/Article-III___-Examples-of-categories/#A-Lean-Companion-to-Conceptual-Mathematics--Article-III___-Examples-of-categories--4___-Categories-of-endomaps"}});